#ifndef VIBELANG_PARSER_H
#define VIBELANG_PARSER_H

#include "../utils/ast.h"

#ifdef __cplusplus
extern "C" {
#endif

/* 
 * This file provides the interface to the parser generated by PackCC.
 * The actual implementation will be generated from grammar.peg.
 */

/* Parser context structure */
typedef struct vibe_context_t vibe_context_t;

/* Create a parser context for a string */
vibe_context_t* vibe_create(const char* input);

/* Parse input and build AST */
int vibe_parse(vibe_context_t* ctx, ast_node_t** ast);

/* Get error message in case of parse failure */
const char* vibe_get_error(vibe_context_t* ctx);

/* Get source location info for error reporting */
void vibe_get_error_location(vibe_context_t* ctx, int* line, int* column);

/* Destroy parser context */
void vibe_destroy(vibe_context_t* ctx);

/* Parse a string directly and return the AST (utility function) */
ast_node_t* parse_string(const char* source);

#ifdef __cplusplus
}
#endif

#endif /* VIBELANG_PARSER_H */
